[
  {
    "module_id": "react_signup_screen",
    "module_name": "React Sign Up Screen",
    "language": "tsx",
    "inputs": ["onSubmit", "isSubmitting", "errorMessage"],
    "outputs": ["<SignUpScreen /> component"],
    "documentation": "Reusable React sign up screen built with Material UI and react-hook-form. Validates email and password fields and reports submission state.",
    "code": "import React from 'react';\nimport { Alert, Box, Button, Stack, TextField, Typography } from '@mui/material';\nimport { useForm } from 'react-hook-form';\n\nexport interface SignUpFormValues {\n  displayName: string;\n  email: string;\n  password: string;\n  confirmPassword: string;\n}\n\ninterface SignUpScreenProps {\n  onSubmit: (values: SignUpFormValues) => Promise<void> | void;\n  isSubmitting?: boolean;\n  errorMessage?: string | null;\n}\n\nexport const SignUpScreen: React.FC<SignUpScreenProps> = ({ onSubmit, isSubmitting = false, errorMessage = null }) => {\n  const { register, handleSubmit, watch, formState: { errors } } = useForm<SignUpFormValues>();\n\n  const handleFormSubmit = handleSubmit(async (values) => {\n    await onSubmit(values);\n  });\n\n  const passwordValue = watch('password');\n\n  return (\n    <Box component={'section'} maxWidth={420} mx={'auto'} mt={8} px={4} py={5} borderRadius={2} boxShadow={3} bgcolor={'background.paper'}>\n      <Typography variant={'h5'} component={'h1'} gutterBottom>Sign Up</Typography>\n      <form onSubmit={handleFormSubmit} noValidate>\n        <Stack spacing={2}>\n          <TextField\n            label={'Display Name'}\n            autoComplete={'name'}\n            {...register('displayName', { required: 'Display name is required.' })}\n            error={Boolean(errors.displayName)}\n            helperText={errors.displayName?.message}\n            fullWidth\n          />\n          <TextField\n            type={'email'}\n            label={'Email'}\n            autoComplete={'email'}\n            {...register('email', {\n              required: 'Email is required.',\n              pattern: {\n                value: /[^@ \\t\\r\\n]+@[^@ \\t\\r\\n]+\\.[^@ \\t\\r\\n]+/,\n                message: 'Enter a valid email address.'\n              }\n            })}\n            error={Boolean(errors.email)}\n            helperText={errors.email?.message}\n            fullWidth\n          />\n          <TextField\n            type={'password'}\n            label={'Password'}\n            autoComplete={'new-password'}\n            {...register('password', {\n              required: 'Password is required.',\n              minLength: { value: 8, message: 'Use at least 8 characters.' }\n            })}\n            error={Boolean(errors.password)}\n            helperText={errors.password?.message}\n            fullWidth\n          />\n          <TextField\n            type={'password'}\n            label={'Confirm Password'}\n            autoComplete={'new-password'}\n            {...register('confirmPassword', {\n              required: 'Confirm your password.',\n              validate: value => value === passwordValue || 'Passwords must match.'\n            })}\n            error={Boolean(errors.confirmPassword)}\n            helperText={errors.confirmPassword?.message}\n            fullWidth\n          />\n          {errorMessage ? <Alert severity={'error'}>{errorMessage}</Alert> : null}\n          <Button type={'submit'} variant={'contained'} size={'large'} disabled={isSubmitting}>\n            {isSubmitting ? 'Creating account...' : 'Create account'}\n          </Button>\n        </Stack>\n      </form>\n    </Box>\n  );\n};\n"
  },
  {
    "module_id": "react_login_screen",
    "module_name": "React Login Screen",
    "language": "tsx",
    "inputs": ["onSubmit", "onForgotPassword", "onNavigateToSignUp", "isSubmitting", "errorMessage"],
    "outputs": ["<LoginScreen /> component"],
    "documentation": "Authentication form for logging in users with optional navigation callbacks for password reset and sign up.",
    "code": "import React from 'react';\nimport { Alert, Box, Button, Link, Stack, TextField, Typography } from '@mui/material';\nimport { useForm } from 'react-hook-form';\n\nexport interface LoginFormValues {\n  email: string;\n  password: string;\n}\n\ninterface LoginScreenProps {\n  onSubmit: (values: LoginFormValues) => Promise<void> | void;\n  onForgotPassword?: (email: string) => void;\n  onNavigateToSignUp?: () => void;\n  isSubmitting?: boolean;\n  errorMessage?: string | null;\n}\n\nexport const LoginScreen: React.FC<LoginScreenProps> = ({ onSubmit, onForgotPassword, onNavigateToSignUp, isSubmitting = false, errorMessage = null }) => {\n  const { register, handleSubmit, formState: { errors }, watch } = useForm<LoginFormValues>();\n\n  const handleFormSubmit = handleSubmit(async (values) => {\n    await onSubmit(values);\n  });\n\n  const emailValue = watch('email');\n\n  return (\n    <Box component={'section'} maxWidth={380} mx={'auto'} mt={8} px={4} py={5} borderRadius={2} boxShadow={3} bgcolor={'background.paper'}>\n      <Typography variant={'h5'} component={'h1'} gutterBottom>Log In</Typography>\n      <form onSubmit={handleFormSubmit} noValidate>\n        <Stack spacing={2}>\n          <TextField\n            type={'email'}\n            label={'Email'}\n            autoComplete={'email'}\n            {...register('email', {\n              required: 'Email is required.',\n              pattern: {\n                value: /[^@ \\t\\r\\n]+@[^@ \\t\\r\\n]+\\.[^@ \\t\\r\\n]+/,\n                message: 'Enter a valid email address.'\n              }\n            })}\n            error={Boolean(errors.email)}\n            helperText={errors.email?.message}\n            fullWidth\n          />\n          <TextField\n            type={'password'}\n            label={'Password'}\n            autoComplete={'current-password'}\n            {...register('password', { required: 'Password is required.' })}\n            error={Boolean(errors.password)}\n            helperText={errors.password?.message}\n            fullWidth\n          />\n          {errorMessage ? <Alert severity={'error'}>{errorMessage}</Alert> : null}\n          <Button type={'submit'} variant={'contained'} size={'large'} disabled={isSubmitting}>\n            {isSubmitting ? 'Signing in...' : 'Sign in'}\n          </Button>\n          <Stack direction={'row'} justifyContent={'space-between'} alignItems={'center'}>\n            <Link component={'button'} type={'button'} onClick={() => onForgotPassword && onForgotPassword(emailValue)} sx={{ p: 0 }}>\n              Forgot password?\n            </Link>\n            <Link component={'button'} type={'button'} onClick={onNavigateToSignUp} sx={{ p: 0 }}>\n              Create an account\n            </Link>\n          </Stack>\n        </Stack>\n      </form>\n    </Box>\n  );\n};\n"
  },
  {
    "module_id": "react_profile_screen",
    "module_name": "React Profile Screen",
    "language": "tsx",
    "inputs": ["user", "onUpdateProfile", "isUpdating", "statusMessage"],
    "outputs": ["<ProfileScreen /> component"],
    "documentation": "Profile screen with editable fields for display name, avatar URL, and bio. Includes optimistic form handling and success messaging.",
    "code": "import React, { useEffect, useMemo, useState } from 'react';\nimport { Alert, Avatar, Box, Button, Stack, TextField, Typography } from '@mui/material';\nimport { useForm } from 'react-hook-form';\n\nexport interface ProfileFormValues {\n  displayName: string;\n  email: string;\n  photoURL?: string;\n  bio?: string;\n}\n\ninterface ProfileScreenProps {\n  user: ProfileFormValues;\n  onUpdateProfile: (values: ProfileFormValues) => Promise<void> | void;\n  isUpdating?: boolean;\n  statusMessage?: string | null;\n}\n\nexport const ProfileScreen: React.FC<ProfileScreenProps> = ({ user, onUpdateProfile, isUpdating = false, statusMessage = null }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const { register, handleSubmit, reset, formState: { errors, isDirty } } = useForm<ProfileFormValues>({\n    defaultValues: user\n  });\n\n  useEffect(() => {\n    reset(user);\n  }, [reset, user]);\n\n  const initials = useMemo(() => {\n    return user.displayName?.split(' ').map((part) => part[0]?.toUpperCase()).join('').slice(0, 2) || 'U';\n  }, [user.displayName]);\n\n  const toggleEditing = () => {\n    if (isEditing) {\n      reset(user);\n    }\n    setIsEditing(!isEditing);\n  };\n\n  const submitHandler = handleSubmit(async (values) => {\n    await onUpdateProfile(values);\n    setIsEditing(false);\n  });\n\n  return (\n    <Box component={'section'} maxWidth={520} mx={'auto'} mt={6} px={4} py={5} borderRadius={2} boxShadow={3} bgcolor={'background.paper'}>\n      <Stack spacing={3} alignItems={'center'}>\n        <Avatar src={user.photoURL} sx={{ width: 96, height: 96, fontSize: 32 }}>\n          {initials}\n        </Avatar>\n        <Typography variant={'h5'} component={'h1'}>{user.displayName}</Typography>\n      </Stack>\n\n      <Box mt={4}>\n        <form onSubmit={submitHandler} noValidate>\n          <Stack spacing={2}>\n            <TextField\n              label={'Display Name'}\n              {...register('displayName', { required: 'Display name is required.' })}\n              error={Boolean(errors.displayName)}\n              helperText={errors.displayName?.message}\n              fullWidth\n              disabled={!isEditing}\n            />\n            <TextField\n              label={'Email'}\n              type={'email'}\n              {...register('email', { required: 'Email is required.' })}\n              error={Boolean(errors.email)}\n              helperText={errors.email?.message}\n              fullWidth\n              disabled\n            />\n            <TextField\n              label={'Photo URL'}\n              {...register('photoURL')}\n              fullWidth\n              disabled={!isEditing}\n            />\n            <TextField\n              label={'Bio'}\n              multiline\n              minRows={3}\n              {...register('bio')}\n              fullWidth\n              disabled={!isEditing}\n            />\n            {statusMessage ? <Alert severity={'success'}>{statusMessage}</Alert> : null}\n            <Stack direction={'row'} spacing={2} justifyContent={'flex-end'}>\n              <Button type={'button'} variant={'outlined'} onClick={toggleEditing}>\n                {isEditing ? 'Cancel' : 'Edit profile'}\n              </Button>\n              <Button type={'submit'} variant={'contained'} disabled={!isEditing || !isDirty || isUpdating}>\n                {isUpdating ? 'Saving...' : 'Save changes'}\n              </Button>\n            </Stack>\n          </Stack>\n        </form>\n      </Box>\n    </Box>\n  );\n};\n"
  },
  {
    "module_id": "firebase_email_auth",
    "module_name": "Firebase Email Auth",
    "language": "ts",
    "inputs": ["config", "auth", "payload"],
    "outputs": ["Firebase auth helpers"],
    "documentation": "Initialises Firebase app and exposes helpers for email/password authentication flows including sign up, sign in, password reset, and auth state subscription.",
    "setup_required": true,
    "setup_instructions": "1. Create a Firebase project at https://console.firebase.google.com\n2. Enable Email/Password authentication: Go to Authentication > Sign-in method > Enable Email/Password\n3. Get your Firebase config from Project Settings > General > Your apps\n4. Create a config file with your Firebase credentials (apiKey, authDomain, projectId, appId)",
    "code": "import { initializeApp, type FirebaseApp } from 'firebase/app';\nimport { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, updateProfile, signOut, sendPasswordResetEmail, type Auth, type User } from 'firebase/auth';\n\nlet cachedApp: FirebaseApp | null = null;\nlet cachedAuth: Auth | null = null;\n\nexport interface FirebaseAuthConfig {\n  apiKey: string;\n  authDomain: string;\n  projectId: string;\n  appId: string;\n}\n\nexport interface SignUpPayload {\n  displayName: string;\n  email: string;\n  password: string;\n}\n\nexport const initFirebaseAuth = (config: FirebaseAuthConfig): Auth => {\n  if (!cachedApp) {\n    cachedApp = initializeApp(config);\n  }\n  if (!cachedAuth) {\n    cachedAuth = getAuth(cachedApp);\n  }\n  return cachedAuth;\n};\n\nexport const signUpWithEmail = async (auth: Auth, payload: SignUpPayload): Promise<User> => {\n  const result = await createUserWithEmailAndPassword(auth, payload.email, payload.password);\n  if (payload.displayName) {\n    await updateProfile(result.user, { displayName: payload.displayName });\n  }\n  return result.user;\n};\n\nexport const signInWithEmail = async (auth: Auth, email: string, password: string): Promise<User> => {\n  const result = await signInWithEmailAndPassword(auth, email, password);\n  return result.user;\n};\n\nexport const signOutCurrentUser = (auth: Auth): Promise<void> => {\n  return signOut(auth);\n};\n\nexport const sendPasswordReset = (auth: Auth, email: string): Promise<void> => {\n  return sendPasswordResetEmail(auth, email);\n};\n\nexport const subscribeToAuthChanges = (auth: Auth, callback: (user: User | null) => void) => {\n  return onAuthStateChanged(auth, callback);\n};\n\nexport const getCurrentUser = (auth: Auth): User | null => auth.currentUser;\n"
  },
  {
    "module_id": "firebase_realtime_db",
    "module_name": "Firebase Realtime Database",
    "language": "ts",
    "inputs": ["app", "db", "uid", "profile", "updates", "activity"],
    "outputs": ["Realtime database helpers"],
    "documentation": "Provides helpers to initialise the Firebase Realtime Database, persist user profiles, subscribe to updates, and append timeline activity records.",
    "setup_required": true,
    "setup_instructions": "1. In your Firebase project console, go to Realtime Database\n2. Click 'Create Database' and choose a location\n3. Start in test mode (or configure security rules for production)\n4. Add the databaseURL to your Firebase config\n5. Update security rules to protect user data (e.g., users can only read/write their own data)",
    "code": "import { child, get, getDatabase, onValue, push, ref, set, update, type DataSnapshot, type Database } from 'firebase/database';\nimport type { FirebaseApp } from 'firebase/app';\n\nlet cachedDb: Database | null = null;\n\nexport const initRealtimeDatabase = (app: FirebaseApp): Database => {\n  if (!cachedDb) {\n    cachedDb = getDatabase(app);\n  }\n  return cachedDb;\n};\n\nexport const writeUserProfile = async (db: Database, uid: string, profile: Record<string, unknown>): Promise<void> => {\n  await set(ref(db, `users/${uid}`), profile);\n};\n\nexport const updateUserProfile = async (db: Database, uid: string, updates: Record<string, unknown>): Promise<void> => {\n  await update(ref(db, `users/${uid}`), updates);\n};\n\nexport const subscribeToUserProfile = (db: Database, uid: string, callback: (snapshot: DataSnapshot) => void) => {\n  const profileRef = ref(db, `users/${uid}`);\n  return onValue(profileRef, callback);\n};\n\nexport const fetchUserProfile = async (db: Database, uid: string): Promise<unknown> => {\n  const snapshot = await get(child(ref(db), `users/${uid}`));\n  return snapshot.exists() ? snapshot.val() : null;\n};\n\nexport const appendUserActivity = async (db: Database, uid: string, activity: Record<string, unknown>): Promise<void> => {\n  const listRef = ref(db, `users/${uid}/activity`);\n  await push(listRef, { ...activity, timestamp: Date.now() });\n};\n"
  }
]
